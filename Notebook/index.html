<!DOCTYPE html>
<head>
  <title>My Coding Notebook</title>
  <link
    rel="icon"
    type="image/x-icon"
    href="images/cat-write.png"
  />
  <link rel="stylesheet" type="text/css" href="styles.css" />
</head>
<body>
  <header>
    <div id="progress-bar"></div>
    <img
      id="logo"
      src="images/cat-write.png"
    />
    <h1>My Coding Notebook</h1>
    <div id="table-of-contents"></div>
  </header>
  <section id="command-line">
    <h2>Command Line Stuff</h2>
    <div class="note-section">
      <h3>Basic commands</h3>
      <ol>
        <li>
          ls: lists the files in the curent folder (list segment)
          <div class="example">
            <p>$ ls</p>
            <p>README.txt tester.txt</p>
          </div>
        </li>
        <li>
          pwd: shows the current folder (print working directory)
          <div class="example">
            <p>$ pwd</p>
            <p>
              /c/Users/iamni/Documents/Coding-Projects/git_practice/Notebook
            </p>
          </div>
        </li>
        <li>
          touch: creates a new file without editing it.
          <div class="example">
            <p>$ touch newfile.txt</p>
          </div>
        </li>
        <li>
          echo: creates a file and adds text to it or appends text to an
          existing file. (write and overwrite is >, append is >>)
          <div class="example">
            <p>$ echo "Here's some text." > newfile.txt</p>
            <p>$ echo "And here's some new text." >> newfile.txt</p>
          </div>
        </li>
        <li>
          cat: creates a file and allows adding text to it to happen directly in
          the terminal following. (Exit with Ctrl + D.) Also shows a files
          contents.
          <div class="example">
            <p>$ cat > this-makes-a-new-file.txt</p>
            <p>I'm adding text now...|</p>
            <p>&nbsp;</p>
            <p>$ cat this-displays-its-contents.txt</p>
            <p>This is its contents.</p>
          </div>
        </li>
        <li>
          sed: Adds new text to a specific line in a file.
          <div class="example">
            <p>$ sed -i '2a Here's some text for after line 2.' newfile.txt</p>
          </div>
        </li>
        <li>
          mkdir: makes a new folder
          <div class="example">
            <p>$ mkdir newFolder</p>
          </div>
        </li>
        <li>
          code: opens a file in VSCode
          <div class="example">
            <p>$ code index.html</p>
          </div>
        </li>
      </ol>
    </div>
  </section>
  <footer>
    <!--Light mode dark mode toggle button-->
    <button id="theme-toggle">
      <img
        src="https://cdn-icons-png.flaticon.com/128/8165/8165773.png"
        alt="day-night"
      />
    </button>
  </footer>
  <script>
    /**___________________________________________________________________________________________________ **/
    /*******MAKE DYNAMIC TOC********/
    

    const headings = document.querySelectorAll("h2, h3, h4");
    const tocContainer = document.getElementById("table-of-contents");

    headings.forEach((heading, index) => {
      //Create ID for a heading if it doesn't have one
      if (!heading.id) {
        heading.id = `section-${index}`;
      }

      //Create an anchor link for headings
      const link = document.createElement("a");
      link.href = `#${heading.id}`;
      link.textContent = heading.textContent;
      link.style.display = "block";
      //can change

      //adjust margin based on heading
      link.style.marginLeft = `${(parseInt(heading.tagName[1]) - 1) * 20}px`;

      //add link to container
      tocContainer.appendChild(link);
    });

    /**___________________________________________________________________________________________________ **/
    /******* MAKE LIGHT AND DARK MODE ********/
    

    const themeToggleButton = document.getElementById("theme-toggle");

    themeToggleButton.addEventListener("click", () => {
      document.body.classList.toggle("dark-mode");

      //Save
      if (document.body.classList.contains("dark-mode")) {
        localStorage.setItem("theme", "dark");
      } else {
        localStorage.setItem("theme", "light");
      }
    });

    //Check save
    const savedTheme = localStorage.getItem("theme");
    if (savedTheme === "dark") {
      document.body.classList.add("dark-mode");
    }

    /**___________________________________________________________________________________________________ **/
    /******* PAGE SCROLL PROGRESS BAR ********/
    

    //get the progress bar element
    const progressBar = document.getElementById("progress-bar");
    // get page height
    const pageHeight = document.documentElement.scrollHeight;
    // get view width and height
    const viewWidth = document.documentElement.clientWidth;
    const viewHeight = document.documentElement.clientHeight;
    // get scrollable distance
    const scrollableHeight = pageHeight - viewHeight;

    // tracking scrolling and update progress bar accordingly
    document.addEventListener("scroll", () => {
      // Get the current width and height
      let currentWidth = progressBar.offsetWidth;

      // calculate where we are in the scroll
      let currentScroll = document.documentElement.scrollTop;
      let percentScroll = currentScroll / scrollableHeight;

      // update progress bar
      progressBar.style.width = viewWidth * percentScroll + "px"; //could have left it as a percent
    });


    /**___________________________________________________________________________________________________ **/
    /******* COLLAPSIBLE SECTIONS ********/

  </script>
</body>
